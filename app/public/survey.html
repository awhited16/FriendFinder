<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- TITLE -->
    <title>Home | Friend Finder</title>

    <!--BOOTSTRAP-->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!--JQUERY-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <style>      
      body {
        width: 90%;
        margin: auto;
      }
      h1 {
        font-size: 30px;
        font-weight: bolder;
        padding-top: 30px;
      }
      h2 {
        font-size: 20px;
        font-weight: bold;
      }
      .form-control {
        width: 500px;
      }
    </style>

</head>

<body>
    <h1 class="lead">Survey Questions</h1>
    <hr>
    <h2 class="secondary">About You</h2>

    <!-- Form -->
    <form>
        <div class="form-group">
          <label for="exampleInputEmail1">Name (required)</label>
          <input type="text" class="form-control" id="name" aria-describedby="emailHelp">
        </div>
        <div class="form-group">
          <label for="exampleInputPassword1">Link to Photo Image</label>
          <input type="text" class="form-control" id="photo">
        </div>
        <hr>
        <div class="form-group">
            <h2>Question 1</h2>
            <label for="exampleFormControlSelect1">My ideal Friday night involves a drink and music.</label>
            <select class="form-control" id="score1">
              <option>1 (Strongly Disagree)</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
          <h2>Question 2</h2>
          <label for="exampleFormControlSelect1">I prefer the book to the movie.</label>
          <select class="form-control" id="score2">
            <option>1 (Strongly Disagree)</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
          </select>
      </div>
      <div class="form-group">
        <h2>Question 3</h2>
        <label for="exampleFormControlSelect1">I prefer comedies to horror films.</label>
        <select class="form-control" id="score3">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <div class="form-group">
        <h2>Question 4</h2>
        <label for="exampleFormControlSelect1">I take sweet over salty.</label>
        <select class="form-control" id="score4">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <div class="form-group">
        <h2>Question 5</h2>
        <label for="exampleFormControlSelect1">My closet is full of colorful clothes.</label>
        <select class="form-control" id="score5">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
    </div>
    <div class="form-group">
      <h2>Question 6</h2>
      <label for="exampleFormControlSelect1">I love puns.</label>
      <select class="form-control" id="score6">
        <option>1 (Strongly Disagree)</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <h2>Question 7</h2>
      <label for="exampleFormControlSelect1">I am a morning person.</label>
      <select class="form-control" id="score7">
        <option>1 (Strongly Disagree)</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <h2>Question 8</h2>
      <label for="exampleFormControlSelect1">I preferred gym class over math class.</label>
      <select class="form-control" id="score8">
        <option>1 (Strongly Disagree)</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <h2>Question 9</h2>
      <label for="exampleFormControlSelect1">I would rather watch a play than a sports game.</label>
      <select class="form-control" id="score9">
        <option>1 (Strongly Disagree)</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <h2>Question 10</h2>
      <label for="exampleFormControlSelect1">I prefer a long hike to a day at the pool.</label>
      <select class="form-control" id="score10">
        <option>1 (Strongly Disagree)</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5 (Strongly Agree)</option>
      </select>
    </div>
        <button type="submit" class="btn btn-primary" id="submitBtn">Submit</button>
      </form>
    <hr>
    <div>
        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/awhited16/FriendFinder">GitHub Repo</a></p>
    </div>

    <!-- Modal -->
    <div class="modal" tabindex="-1" role="dialog" id="match-modal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">We found you a match!</h5>
            <div class="modal-body">
              <h3 id="match-name"></h3>
              <img id="match-img" alt="" height="400px">
            </div>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" id="match-entry">
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      $(document).ready(function($) {
        $("#submitBtn").on("click", function(e) {
          e.preventDefault();


          var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            scores: [parseInt($("#score1").val()), parseInt($("#score2").val()), parseInt($("#score3").val()), 
            parseInt($("#score4").val()), parseInt($("#score5").val()), parseInt($("#score6").val()), 
            parseInt($("#score7").val()), parseInt($("#score8").val()), parseInt($("#score9").val()), 
            parseInt($("#score9").val())]
          };
          console.log(newFriend);

          $.post("/api/friends", newFriend)
          .then(function(data) {
            console.log("survey.html", data);
            console.log(newFriend);
            $("#match-name").text(data.name);
            $("#match-img").attr("src", data.photo);
            jQuery.noConflict();
            // $("#match-modal").modal("show");
            alert("Your match is " + data);
            $("#name").val("");
            $("#photo").val("");
          });
          }
        );
      });

      

  </script>

</body>

</html>
